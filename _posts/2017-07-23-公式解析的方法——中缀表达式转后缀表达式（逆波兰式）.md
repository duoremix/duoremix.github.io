---
layout: default
title: 公式解析的部分——中缀表达式转后缀表达式（逆波兰式）
comments: true
---
本文主要介绍一下做公式解析时使用的一种方法——中缀表达式转后缀表达式。
首先了解一下什么叫中缀表达式，运算符方在算数中间的式子就是中缀表达式，也就是我们平时写的算式，例如：a+b。这种式子在我们做计算的时候无法判断计算的顺序和优先度，比如a + b * c，如果我们使用改式子做运算，按照从左到右的顺序，会先计算a+b，得到结果d，再算d * c,这显然是不正确的，因为乘法有着更高的优先级，但无法在中缀表达式中体现出来，因此，我们需要将其转化为后缀表达式。

后缀表达式，故名思义就是把运算符放在算数的后方，如：ab+，abc*+。这种式子可以解决上述出现的情况。具体实现的方法我们以一个例子来讲述。

现有一个式子(a + b * c ) * d，要把它转成后缀表达式，首先，我们要做两个栈，一个用于输出最终结果，设为A，一个用于存放运算符（为了按照优先级筛选运算符），设为B，然后我们开始从左往右遍历这个式子。

左括号(，入栈B

```
A:
B:(

```
算数a，入栈A

```
A:a
B:(
```

运算符+，入栈B

```
A:a
B:(,+
```
算数b，入栈A


```
A:a,b
B:(,+
```
运算符 * ，因为 * 比 +优先级高，因此直接入栈B（优先级高的始终在栈顶）


```
A:a,b
B:(,+,*
```

算数c，入栈A

```
A:a,b,c
B:(,+,*
```

右括号)，由于右括号存在，因此必须把前一个左括号为止的运算符全部按顺序出栈至A

```
A:a,b,c,*,+
B:
```

运算符*，入栈B

```
A:a,b,c,*,+
B:*
```

算数d，入栈A

```
A:a,b,c,*,+,d
B:*
```

由于此时公式遍历已完成，因此把B中所有的运算符都按顺序出栈并入栈A

```
A:a,b,c,*,+,d,*
B:
```

此时就得到了我们要的结果，a b c * + d *

那具体运算的时候我们要怎么做呢，我们需要准备一个栈用于存放所有等待计算的算数，然后从左往右遍历该后缀表达式，遇到算数即入栈，遇到运算符，则把栈顶两个算数按顺序出栈并进行计算，计算结果再次入栈，直到公式遍历完成和栈空。有兴趣的朋友按照上面的算法对我们的式子进行计算，看看最终能不能得到原来的中缀表达式吧。
